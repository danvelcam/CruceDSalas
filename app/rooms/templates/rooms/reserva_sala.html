{% extends 'base.html' %}
{% load static %}
{% block content %}

<style>
    body {
        font-family: "Segoe UI", sans-serif;
        background: url("{% static 'images/fondo.jpg' %}") no-repeat center center fixed;
        background-size: cover;
        color: white;
    }

    .reservation-container {
        background-color: #1989a8;
        border: 3px solid white; 
        border-radius: 15px;
        padding: 20px 40px;
        max-width: 500px;
        margin: 50px auto;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    h2 {
        font-size: 1.8rem;
        margin-top: 10px;
        margin-bottom: 10px;
        color: white;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        text-align: center;
    }

    form {
        display: flex;
        flex-direction: column;
        gap: 5px;
        margin-right: 15px;
    }

    label {
        font-size: 1rem;
        margin-bottom: 5px;
        font-weight: bold;        
    }

    input, select, textarea {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: 2px solid rgba(255, 255, 255, 0.4);
        background-color: rgba(255, 255, 255, 0.1);
        color: white;
        font-size: 1rem;
        padding-right: 5px;
        
    }

    input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: white;
        background-color: rgba(255, 255, 255, 0.2);
    }

    button {
        padding: 10px 20px;
        border: 1px solid white; 
        font-size: 1rem;
        background-color: #28965A;
        color: white;
        margin-left: 15px;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.2s;
    }

    button:hover {
        background-color: #28967;
        transform: scale(1.05);
        
    }

    .form-errors {
        color: #ff6f61;
        font-size: 0.9rem;
        margin-bottom: 10px;
    }
</style>

<div class="reservation-container">
    <h2>Reservar {{ sala.nombre }}</h2>

    <form method="post">
        {% csrf_token %}
        <div class="form-errors">
            <!-- Mostrar errores si hay -->
            {% if form.errors %}
                {% for field in form %}
                    {% for error in field.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            {% endif %}
        </div>
        {{ form.as_p }}

        <button type="submit">Realizar Reserva</button>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var fechaInput = document.getElementById('id_fecha');
        var horaInicioInput = document.getElementById('id_hora_inicio');
        var horaFinInput = document.getElementById('id_hora_fin');

        // Configurar límites de fecha
        fechaInput.min = '{{ fecha_actual|date:"Y-m-d" }}';
        fechaInput.max = '{{ fecha_limite|date:"Y-m-d" }}';

        // Configurar límites de hora
        horaInicioInput.min = '09:00';
        horaInicioInput.max = '21:00';
        horaFinInput.min = '09:00';
        horaFinInput.max = '21:00';

        // Validación adicional
        horaInicioInput.addEventListener('change', function() {
            if (horaFinInput.value && this.value >= horaFinInput.value) {
                alert('La hora de inicio debe ser anterior a la hora de fin.');
                this.value = '';
            }
        });

        horaFinInput.addEventListener('change', function() {
            if (horaInicioInput.value && this.value <= horaInicioInput.value) {
                alert('La hora de fin debe ser posterior a la hora de inicio.');
                this.value = '';
            }
        });
    });
</script>
{% endblock %}
