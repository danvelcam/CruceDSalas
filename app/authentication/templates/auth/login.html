{% extends "base.html" %}
{% load static %}

{% block title %}Iniciar Sesión{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">
<div class="form-container">
    <div class="login-box">
        <h2>Introduce tus credenciales para iniciar sesión</h2>
        <img src="{% static 'images/Logo_crucedesalasazul.png' %}" style="width: 80px; 
    margin-bottom: 10px;" alt="Logo">
        
        {% if messages %}
            {% for message in messages %}
                <div id="error-container" class="error-message">
                    {{ message }}
                </div>
            {% endfor %}
        {% else %}
            <div id="error-container" class="error-message"></div>
        {% endif %}

        <form method="post" onsubmit="return validateLogin();">
            {% csrf_token %}
            {% for field in form %}
                {% if field.name == "pin" %}
                    <!-- Campo de PIN como tipo password, manteniendo el estilo -->
                    <div class="form-field {% if field.errors %}field-error{% endif %}">
                        <input type="password" value="{{ field.value|default:'' }}" name="{{ field.html_name }}" id="{{ field.id_for_label }}" placeholder=" " required>
                        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                        {% if field.errors %}
                            <ul class="errorlist">
                                {% for error in field.errors %}
                                    <li>{{ error }}</li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                {% else %}
                    <!-- Renderizar otros campos normalmente -->
                    <div class="form-field {% if field.errors %}field-error{% endif %}">
                        <input type="{{field.input_type }}" value="{{ field.value|default:'' }}" name="{{ field.html_name }}" id="{{ field.id_for_label }}" placeholder=" " required>
                        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                        {% if field.errors %}
                            <ul class="errorlist">
                                {% for error in field.errors %}
                                    <li>{{ error }}</li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
            <button type="submit">Iniciar Sesión</button>
            <a href="{% url 'send_verification_code' %}" class="btn-secondary">¿Olvido su PIN?</a>

        </form>
        
    </div>
</div>

<script src="{% static 'scripts/loginValidation.js' %}"></script>

{% endblock %}
